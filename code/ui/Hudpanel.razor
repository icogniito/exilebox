
@inherits Sandbox.UI.Panel
@using Sandbox
@namespace ExileBox

<style>
    Hudpanel {
        position: absolute;
        bottom: 0px;
        left: 0px;
        width: 100%;
    }

    .uipanel {
        display: block;
        margin-left: auto;
        margin-right: auto;
        width: 100%;
        height: auto;
    }
    
    .uipanelroot {
        display: block;
        margin-left: auto;
        margin-right: auto;
        width: 50%;
        height: auto;
    }

    .fill {
        width: 200%;
        padding: 0px;
        transform: rotatex(180deg);
    }
    .fillContainer {
        position: absolute;
        bottom: 12px;
        left: 13px;
        width: 205px;
        height: 205px;
        padding: 0px;
        overflow: hidden;
        border-radius: 50%;
    }
</style>

<root>
    <div class="uipanelroot">
        <div class="fillContainer">
            <img src="textures/ui/health/scrollFill.png" class="fill" style="height: @(GetHealth())%"></img>
        </div>
        <img src="textures/ui/health/uipanel.png" class="uipanel"></img>
        </div>
</root>

@code {
    public int GetHealth()
    {
        var player = Game.LocalPawn as Pawn;
        if (player == null) return 0;

        return (int)player.Health;
    }

    protected override int BuildHash()
    {
        var currentHealth = GetHealth();

        return currentHealth.GetHashCode();
    }
}